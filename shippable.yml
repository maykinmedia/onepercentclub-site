language: python
cache: true
python:
- '2.7'
node_js:
- '0.10'
addons:
  firefox: '30.0'
env:
  matrix:
  - DJANGO=django==1.5.4
services:
- memcached
before_install:
- sudo gem install compass -v 0.12.7
- sudo gem install bourbon neat
- npm install -g grunt-cli
- npm install
- sudo apt-get install -qq memcached python-memcache libjpeg8-dev libjpeg-dev zlib1g-dev libpng12-dev
- pip install Pillow --use-mirrors
install:
- pip install --upgrade setuptools --use-mirrors
- pip install $DJANGO --use-mirrors
- pip install --use-mirrors --use-wheel --find-links=https://stream.onepercentclub.com/wheelhouse/ -r requirements/ci_requirements.txt
- touch onepercentclub/settings/secrets.py
- bourbon install --path=static/global/refactor-sass/lib
- bash -c "cd static/global/refactor-sass/lib && neat install"
before_script:
- pip show bluebottle
- grunt build:css --bb_path="`pip show bluebottle | grep Location | cut -b11-`"
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
script:
- python ./manage.py test --settings=onepercentclub.settings.travis -v1
